app {
  baseUrl = ${?APP_BASE_URL}
  baseUrl = "http://localhost"

  deviceAuth {
    signatureEnabled = ${?DEVICE_AUTH_SIGNATURE_ENABLED}
    signatureEnabled = false
    pollIntervalSec = ${?DEVICE_POLL_INTERVAL_SEC}
    pollIntervalSec = 60
    nonceWindowSec = ${?DEVICE_AUTH_NONCE_WINDOW_SEC}
    nonceWindowSec = 300
    maxPollPerMinute = ${?DEVICE_POLL_RATE_LIMIT_PER_MINUTE}
    maxPollPerMinute = 120
  }

  session {
    cookieName = ${?SESSION_COOKIE_NAME}
    cookieName = "sf_session"
    ttlHours = ${?SESSION_TTL_HOURS}
    ttlHours = 24
    cookieSecure = ${?SESSION_COOKIE_SECURE}
    cookieSecure = false
    secret = ${SESSION_COOKIE_SECRET}
  }

  security {
    encryptionKey = ${DEVICE_SECRET_ENCRYPTION_KEY}
  }
}

db {
  jdbcUrl = ${POSTGRES_JDBC_URL}
  username = ${POSTGRES_USER}
  password = ${POSTGRES_PASS}
  maxPoolSize = ${?POSTGRES_POOL_SIZE}
  maxPoolSize = 12
  poolName = "smart-feeder"
  telemetry.logging.enabled = true
}

httpServer {
  publicApiHttpPort = ${?APP_PORT}
  publicApiHttpPort = 8080
  privateApiHttpPort = 8085
  privateApiHttpLivenessPath = "/liveness"
  privateApiHttpReadinessPath = "/readiness"
  telemetry.logging.enabled = true
}

openapi {
  management {
    enabled = true
    endpoint = "/openapi"
    swaggerui {
      enabled = true
      endpoint = "/swagger-ui"
    }
    rapidoc {
      enabled = true
      endpoint = "/rapidoc"
    }
    file = ["openapi/smart-feeder-api.yaml"]
  }
}
